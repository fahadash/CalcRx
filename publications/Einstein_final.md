This post assumes that you have the basic idea of C#, LINQ, and Reactive Extensions; and you have read [the previous article in this series](./publications/Einstein_Equation_Fix.md).

###Abstract
This is the second and the last post with regards to [Einstein Equation Fix](./publications/Einstein_Equation_Fix.md). In the last post, we identified a major issue on how LINQ syntax was incorrectly generated by CalcRx and how we fixed that. But there was still one glitch that was causing the Einstein equations to fail. A fix is finally applied and now we can run Lorentz Transformations or similar equations. This post discusses the fix.

###The issue
As you might recall from the [previous post](./publications/Einstein_Equation_Fix.md), we were still not able to run any of Einstein's relativity equations because of the way the bug was still there when functions were involved. To understand the issue better, consider the following expression.

```
1/sqrt(4)
```

I have left out the `self` reference or the `_` underscore for the sake of simplicity. The above will generate an [Expression][expressions] like this

```csharp
__main.Select(a0 => fnsqrt(4)).CombineLatest(__main, (a,b) => 1/a);
```

Which is basically saying, transform the `__main` observable to yield square root of 4, then combine it with `__main` again and do the division.

The above example would look pretty if CalcRx generated the following expression

```csharp
__main.Select(a0 => 1/fnsqrt(4));
```

The last fix was not taking `functions` into account. Since `square roots` in computer programming world are done through functions, most of Einstein's Relativity equations that involve square roots would fail.


For instance, this time dilation equation

```
t = t'/√(1 - (v/c)²)
```

###The fix
The fix this time was easier, or at least we knew what it was. The fix was same but we just have to apply that to `functions`. 

So now finally you can write Einstein Equations in `CalcRx` expressions like so

```csharp
// Length Contraction
var transformedLength = CalcRx.Evaluate<Measurement, double>("Length/(1 - sqrt(Velocity/299792458)^2)", functions); 
```
###Conclusion
No math expression library would do justice if it could not function on any kind of expressions. Specially the Einstein's equations. Good thing the issue is resolved.

[CombineLatest]: https://msdn.microsoft.com/en-us/library/Hh211991(v=VS.103).aspx
[Zip]: https://msdn.microsoft.com/en-us/library/hh244275(v=vs.103).aspx
[Select]: https://msdn.microsoft.com/en-us/library/Hh244306(v=VS.103).aspx
[expression_call]: https://msdn.microsoft.com/en-us/library/bb349020(v=vs.110).aspx
[expressions]: https://msdn.microsoft.com/en-us/library/system.linq.expressions(v=vs.110).aspx
